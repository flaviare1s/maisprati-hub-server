# CONFIGURAÇÕES DE PRODUÇÃO (application-prod.properties)
spring.data.mongodb.uri=${MONGO_URI}
spring.data.mongodb.database=backend-prod

spring.jpa.hibernate.ddl-auto=validate
# Permite ao Spring confiar no proxy Koyeb (essencial para HTTPS/OAuth2)
server.forward-headers-strategy=FRAMEWORK
server.port=${PORT:8080}

# === OTMIZAÇÕES DE MEMÓRIA E CPU ===

# Reduz número de threads do Tomcat para economizar memória nativa
# 25 é um valor seguro para plano Starter
server.tomcat.threads.max=25
server.tomcat.threads.min-spare=5

# Limites de expiração (para produção)
jwt.access-token-expiration=3600
jwt.refresh-token-expiration=604800

# Otimizações de JPA (se aplicável, para liberar recursos mais rapidamente)
spring.jpa.open-in-view=false
spring.jpa.properties.hibernate.jdbc.batch_size=20

# Logs mais leves (devem estar em WARN ou ERROR)
logging.level.root=WARN
logging.level.org.springframework=WARN
logging.level.org.hibernate=ERROR
logging.level.org.springframework.security=WARN

# Desabilita métricas desnecessárias para economizar CPU
management.metrics.enable.jvm=false
management.metrics.enable.process=false
management.metrics.enable.system=false

# Força OAuth2 a não usar sessões (essencial para Bearer Token)
spring.session.store-type=none
